<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .navbar-placeholder {
            width: 100%;
        }
        .content {
            text-align: center;
            margin-top: 50px;
        }
        .btn-group {
            margin-bottom: 20px;
        }
        .form-group {
            display: none;
        }
        .form-group.active {
            display: block;
        }
        .qr-container {
            margin-top: 20px;
        }
        #qrcode {
            width: 320px;
            height: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ccc;
            background-color: #f9f9f9;
            color: #ccc;
            font-size: 16px;
            margin: auto;
        }
        #qrcode svg {
            display: block;
            margin: auto;
        }
        .form-row {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div id="navbar-placeholder" class="navbar-placeholder"></div>
    <div class="content">
        <h1>QR Code Generator</h1>
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" onclick="showForm('url')">URL</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('text')">TEXT</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('email')">EMAIL</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('phone')">PHONE</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('sms')">SMS</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('vcard')">VCARD</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('mecard')">MECARD</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('location')">LOCATION</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('facebook')">FACEBOOK</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('twitter')">TWITTER</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('youtube')">YOUTUBE</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('wifi')">WIFI</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('event')">EVENT</button>
            <button type="button" class="btn btn-outline-primary" onclick="showForm('bitcoin')">BITCOIN</button>
        </div>

        <!-- Form Groups for Each Type -->
        <div class="form-group" id="url">
            <input type="text" class="form-control" id="urlInput" placeholder="Enter URL">
        </div>
        <div class="form-group" id="text">
            <input type="text" class="form-control" id="textInput" placeholder="Enter text">
        </div>
        <div class="form-group" id="email">
            <input type="email" class="form-control" id="emailInput" placeholder="Enter email">
        </div>
        <div class="form-group" id="phone">
            <input type="tel" class="form-control" id="phoneInput" placeholder="Enter phone number">
        </div>
        <div class="form-group" id="sms">
            <input type="tel" class="form-control" id="smsNumberInput" placeholder="Enter phone number">
            <input type="text" class="form-control mt-2" id="smsBodyInput" placeholder="Enter message">
        </div>
        <div class="form-group" id="vcard">
            <div class="form-row">
                <input type="text" class="form-control" id="vcardFirstNameInput" placeholder="Firstname">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardLastNameInput" placeholder="Lastname">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardOrganizationInput" placeholder="Organization">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardTitleInput" placeholder="Position (Work)">
            </div>
            <div class="form-row">
                <input type="tel" class="form-control" id="vcardPhoneWorkInput" placeholder="Phone (Work)">
            </div>
            <div class="form-row">
                <input type="tel" class="form-control" id="vcardPhonePrivateInput" placeholder="Phone (Private)">
            </div>
            <div class="form-row">
                <input type="tel" class="form-control" id="vcardPhoneMobileInput" placeholder="Phone (Mobile)">
            </div>
            <div class="form-row">
                <input type="tel" class="form-control" id="vcardFaxWorkInput" placeholder="Fax (Work)">
            </div>
            <div class="form-row">
                <input type="tel" class="form-control" id="vcardFaxPrivateInput" placeholder="Fax (Private)">
            </div>
            <div class="form-row">
                <input type="email" class="form-control" id="vcardEmailInput" placeholder="Email">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardWebsiteInput" placeholder="Website">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardStreetInput" placeholder="Street">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardZipcodeInput" placeholder="Zipcode">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardCityInput" placeholder="City">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardStateInput" placeholder="State">
            </div>
            <div class="form-row">
                <input type="text" class="form-control" id="vcardCountryInput" placeholder="Country">
            </div>
        </div>
        <div class="form-group" id="mecard">
            <input type="text" class="form-control" id="mecardNameInput" placeholder="Enter name">
            <input type="tel" class="form-control mt-2" id="mecardPhoneInput" placeholder="Enter phone number">
            <input type="email" class="form-control mt-2" id="mecardEmailInput" placeholder="Enter email">
        </div>
        <div class="form-group" id="location">
            <input type="text" class="form-control" id="locationLatInput" placeholder="Enter latitude">
            <input type="text" class="form-control mt-2" id="locationLngInput" placeholder="Enter longitude">
        </div>
        <div class="form-group" id="facebook">
            <input type="text" class="form-control" id="facebookInput" placeholder="Enter Facebook URL">
        </div>
        <div class="form-group" id="twitter">
            <input type="text" class="form-control" id="twitterInput" placeholder="Enter Twitter URL">
        </div>
        <div class="form-group" id="youtube">
            <input type="text" class="form-control" id="youtubeInput" placeholder="Enter YouTube URL">
        </div>
        <div class="form-group" id="wifi">
            <input type="text" class="form-control" id="wifiSSIDInput" placeholder="Enter SSID">
            <input type="text" class="form-control mt-2" id="wifiPasswordInput" placeholder="Enter password">
            <select class="form-control mt-2" id="wifiEncryptionInput">
                <option value="WPA">WPA</option>
                <option value="WEP">WEP</option>
                <option value="">None</option>
            </select>
        </div>
        <div class="form-group" id="event">
            <input type="text" class="form-control" id="eventNameInput" placeholder="Enter event name">
            <input type="text" class="form-control mt-2" id="eventLocationInput" placeholder="Enter event location">
            <input type="datetime-local" class="form-control mt-2" id="eventStartInput" placeholder="Enter event start">
            <input type="datetime-local" class="form-control mt-2" id="eventEndInput" placeholder="Enter event end">
        </div>
        <div class="form-group" id="bitcoin">
            <input type="text" class="form-control" id="bitcoinAddressInput" placeholder="Enter Bitcoin address">
            <input type="text" class="form-control mt-2" id="bitcoinAmountInput" placeholder="Enter amount">
            <input type="text" class="form-control mt-2" id="bitcoinLabelInput" placeholder="Enter label">
        </div>

        <div class="qr-container">
            <div id="qrcode">QR code will appear here</div>
        </div>
        <button class="btn btn-primary mt-3" onclick="downloadSVG()">Download SVG</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode-svg@1.1.0/dist/qrcode.min.js"></script>
    <script>
        function showForm(type) {
            const formGroups = document.querySelectorAll('.form-group');
            formGroups.forEach(group => {
                group.classList.remove('active');
            });
            document.getElementById(type).classList.add('active');
            generateQRCode(); // Generate QR code immediately when form is shown
        }

        function generateQRCode() {
            let content = "";
            const activeForm = document.querySelector('.form-group.active');
            if (!activeForm) return;

            switch (activeForm.id) {
                case 'url':
                    content = document.getElementById('urlInput').value;
                    break;
                case 'text':
                    content = document.getElementById('textInput').value;
                    break;
                case 'email':
                    content = `mailto:${document.getElementById('emailInput').value}`;
                    break;
                case 'phone':
                    content = `tel:${document.getElementById('phoneInput').value}`;
                    break;
                case 'sms':
                    const smsNumber = document.getElementById('smsNumberInput').value;
                    const smsBody = document.getElementById('smsBodyInput').value;
                    content = `SMSTO:${smsNumber}:${smsBody}`;
                    break;
                case 'vcard':
                    const vcardFirstName = document.getElementById('vcardFirstNameInput').value;
                    const vcardLastName = document.getElementById('vcardLastNameInput').value;
                    const vcardOrganization = document.getElementById('vcardOrganizationInput').value;
                    const vcardTitle = document.getElementById('vcardTitleInput').value;
                    const vcardPhoneWork = document.getElementById('vcardPhoneWorkInput').value;
                    const vcardPhonePrivate = document.getElementById('vcardPhonePrivateInput').value;
                    const vcardPhoneMobile = document.getElementById('vcardPhoneMobileInput').value;
                    const vcardFaxWork = document.getElementById('vcardFaxWorkInput').value;
                    const vcardFaxPrivate = document.getElementById('vcardFaxPrivateInput').value;
                    const vcardEmail = document.getElementById('vcardEmailInput').value;
                    const vcardWebsite = document.getElementById('vcardWebsiteInput').value;
                    const vcardStreet = document.getElementById('vcardStreetInput').value;
                    const vcardZipcode = document.getElementById('vcardZipcodeInput').value;
                    const vcardCity = document.getElementById('vcardCityInput').value;
                    const vcardState = document.getElementById('vcardStateInput').value;
                    const vcardCountry = document.getElementById('vcardCountryInput').value;
                    content = `BEGIN:VCARD\nVERSION:3.0\nN:${vcardLastName};${vcardFirstName}\nFN:${vcardFirstName} ${vcardLastName}\nORG:${vcardOrganization}\nTITLE:${vcardTitle}\nTEL;WORK:${vcardPhoneWork}\nTEL;HOME:${vcardPhonePrivate}\nTEL;CELL:${vcardPhoneMobile}\nTEL;FAX;WORK:${vcardFaxWork}\nTEL;FAX;HOME:${vcardFaxPrivate}\nEMAIL:${vcardEmail}\nURL:${vcardWebsite}\nADR;WORK:;;${vcardStreet};${vcardCity};${vcardState};${vcardZipcode};${vcardCountry}\nEND:VCARD`;
                    break;
                case 'mecard':
                    const mecardName = document.getElementById('mecardNameInput').value;
                    const mecardPhone = document.getElementById('mecardPhoneInput').value;
                    const mecardEmail = document.getElementById('mecardEmailInput').value;
                    content = `MECARD:N:${mecardName};TEL:${mecardPhone};EMAIL:${mecardEmail};;`;
                    break;
                case 'location':
                    const locationLat = document.getElementById('locationLatInput').value;
                    const locationLng = document.getElementById('locationLngInput').value;
                    content = `geo:${locationLat},${locationLng}`;
                    break;
                case 'facebook':
                    content = document.getElementById('facebookInput').value;
                    break;
                case 'twitter':
                    content = document.getElementById('twitterInput').value;
                    break;
                case 'youtube':
                    content = document.getElementById('youtubeInput').value;
                    break;
                case 'wifi':
                    const wifiSSID = document.getElementById('wifiSSIDInput').value;
                    const wifiPassword = document.getElementById('wifiPasswordInput').value;
                    const wifiEncryption = document.getElementById('wifiEncryptionInput').value;
                    content = `WIFI:T:${wifiEncryption};S:${wifiSSID};P:${wifiPassword};;`;
                    break;
                case 'event':
                    const eventName = document.getElementById('eventNameInput').value;
                    const eventLocation = document.getElementById('eventLocationInput').value;
                    const eventStart = document.getElementById('eventStartInput').value.replace(/-/g, "").replace(/:/g, "").replace(/\./g, "");
                    const eventEnd = document.getElementById('eventEndInput').value.replace(/-/g, "").replace(/:/g, "").replace(/\./g, "");
                    content = `BEGIN:VEVENT\nSUMMARY:${eventName}\nLOCATION:${eventLocation}\nDTSTART:${eventStart}\nDTEND:${eventEnd}\nEND:VEVENT`;
                    break;
                case 'bitcoin':
                    const bitcoinAddress = document.getElementById('bitcoinAddressInput').value;
                    const bitcoinAmount = document.getElementById('bitcoinAmountInput').value;
                    const bitcoinLabel = document.getElementById('bitcoinLabelInput').value;
                    content = `bitcoin:${bitcoinAddress}?amount=${bitcoinAmount}&label=${bitcoinLabel}`;
                    break;
            }

            // Clear previous QR code
            document.getElementById('qrcode').innerHTML = "";

            // Generate QR code
            const qrcode = new QRCode({
                content: content,
                padding: 4,
                width: 320,
                height: 320,
                color: "#000000",
                background: "#ffffff",
                ecl: "H"
            }).svg();

            // Append the SVG QR code
            document.getElementById('qrcode').innerHTML = qrcode;
        }

        function downloadSVG() {
            const svgElement = document.querySelector('#qrcode svg');
            if (!svgElement) return;

            const serializer = new XMLSerializer();
            const source = serializer.serializeToString(svgElement);
            const blob = new Blob([source], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'qrcode.svg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('input', generateQRCode);
        });
    </script>
    <script src="../config.js"></script>
    <script src="../components/scripts.js"></script>
    <script>
        fetch('https://junovhs.github.io/pooltool/components/navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
                loadNavbar(); // Ensure this function is called to populate the nav links
            });
    </script>
</body>
</html>
